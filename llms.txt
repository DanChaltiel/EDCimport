# EDCimport

## Introduction üì¶

The **EDCimport** package is designed to simplify the import and
management of Electronic Data Capture (EDC) exports, particularly in
clinical research settings. It is an opinionated framework, providing
multiple streamlined tools for importing, cleaning, and checking your
datasets.

> \[!WARNING\] This package is experimental and under active
> development. Backward compatibility is not a priority for the moment.
> For reproducibility, use
> [renv](https://rstudio.github.io/renv/articles/renv.html) to set the
> package version.

## Installation üõ†Ô∏è

``` r
# Install last version available on CRAN
install.packages("EDCimport")

# Install development version on GitHub
pak::pak("DanChaltiel/EDCimport@v0.6.0.9017")
```

> \[!WARNING\] The documentation pertains to the dev version, not the
> one on CRAN.

## Features üöÄ

### Load the data

Use one of
[`read_all_sas()`](https://danchaltiel.github.io/EDCimport/reference/read_all_sas.md),
[`read_all_xpt()`](https://danchaltiel.github.io/EDCimport/reference/read_all_xpt.md),
[`read_all_csv()`](https://danchaltiel.github.io/EDCimport/reference/read_all_csv.md),
or
[`read_trialmaster()`](https://danchaltiel.github.io/EDCimport/reference/read_trialmaster.md),
depending on the type of files in your export directory. You can then
load your datasets into the global environment with
[`load_database()`](https://danchaltiel.github.io/EDCimport/reference/load_database.md).

``` r
library(EDCimport)
db = read_all_sas("path/to/my/files/folder")
print(db)
load_database(db) #this also removes `db` to save some RAM
mean(dataset1$column5)
```

### Database management tools

`EDCimport` includes a set of useful tools that help with using the
imported database. See
[References](https://danchaltiel.github.io/EDCimport/reference/index.html)
for the complete list.

#### Database summary

[`edc_lookup()`](https://danchaltiel.github.io/EDCimport/reference/edc_lookup.md)
returns a dataframe containing the number of rows, columns, patients,
and the CRF name of each dataset.

#### Search the whole database

[`find_keyword()`](https://danchaltiel.github.io/EDCimport/reference/edc_find_value.md)
runs a global search of the database for a given keyword (or regex).

For instance, say you are looking for the ‚Äúdate of ECG‚Äù but don‚Äôt know
where it is, you can run `find_keyword("date")` or
`find_keyword("ecg")`.

It won‚Äôt look into the actual data, though, as this would take too much
computing power.

#### Get the last news date of each subject

[`lastnews_table()`](https://danchaltiel.github.io/EDCimport/reference/lastnews_table.md)
finds the last date of each subject throughout the whole database and
inform on the date original dataset and column. It has arguments to
avoid selecting irrelevant dates.

This is very useful to get the actual followup time when fitting
survival analyses.

#### Data checking system

[`edc_data_warn()`](https://danchaltiel.github.io/EDCimport/reference/edc_data_warn.md)
throws a warning if an inconsistency is found in a dataset. The
interface allows to perform multiple checks and get a report as a CSV
file.

#### Join helpers

As the primary key is almost always the Subject ID, join helpers were
added to reduce code clutter. Currently, only
[`edc_left_join()`](https://danchaltiel.github.io/EDCimport/reference/edc_left_join.md),
[`edc_right_join()`](https://danchaltiel.github.io/EDCimport/reference/edc_left_join.md),
and
[`edc_full_join()`](https://danchaltiel.github.io/EDCimport/reference/edc_left_join.md)
are supported.

#### Shiny browser

[`edc_viewer()`](https://danchaltiel.github.io/EDCimport/reference/edc_viewer.md)
runs a shiny application that browses the whole database. The HTML
interface is quicker and less cluttered than it would be in RStudio. It
also allows filtering by Subject ID.

#### Swimmer Plot

[`edc_swimmerplot()`](https://danchaltiel.github.io/EDCimport/reference/edc_swimmerplot.md)
creates a swimmer plot of **all date variables** of the whole database.
This is very useful to find inconsistencies and outliers, especially
with the `plotly` interactive output.

# Package index

## Reading databases

- [`read_trialmaster()`](https://danchaltiel.github.io/EDCimport/reference/read_trialmaster.md)
  :

  Read the `.zip` archive of a TrialMaster export

- [`read_all_xpt()`](https://danchaltiel.github.io/EDCimport/reference/read_all_xpt.md)
  :

  Read all `.xpt` files in a directory

- [`read_all_sas()`](https://danchaltiel.github.io/EDCimport/reference/read_all_sas.md)
  :

  Read all `.sas7bdat` files in a directory

- [`read_all_csv()`](https://danchaltiel.github.io/EDCimport/reference/read_all_csv.md)
  :

  Read all `.csv` files in a directory

- [`load_database()`](https://danchaltiel.github.io/EDCimport/reference/load_database.md)
  : Load a list in an environment

- [`edc_database`](https://danchaltiel.github.io/EDCimport/reference/edc_database.md)
  : EDCimport Database

- [`edc_lookup()`](https://danchaltiel.github.io/EDCimport/reference/edc_lookup.md)
  : Retrieve the lookup table from options

## Modifying databases

- [`edc_unify_subjid()`](https://danchaltiel.github.io/EDCimport/reference/edc_unify_subjid.md)
  : Harmonize the subject ID of the database
- [`edc_split_mixed()`](https://danchaltiel.github.io/EDCimport/reference/edc_split_mixed.md)
  : Split mixed datasets
- [`edc_clean_names()`](https://danchaltiel.github.io/EDCimport/reference/edc_clean_names.md)
  : Clean up the names of all datasets
- [`set_project_name()`](https://danchaltiel.github.io/EDCimport/reference/set_project_name.md)
  [`get_project_name()`](https://danchaltiel.github.io/EDCimport/reference/set_project_name.md)
  : Set the project name

## Checking databases

- [`edc_data_warn()`](https://danchaltiel.github.io/EDCimport/reference/edc_data_warn.md)
  [`edc_data_stop()`](https://danchaltiel.github.io/EDCimport/reference/edc_data_warn.md)
  [`edc_data_warnings()`](https://danchaltiel.github.io/EDCimport/reference/edc_data_warn.md)
  : Standardized warning system
- [`save_edc_data_warnings()`](https://danchaltiel.github.io/EDCimport/reference/save_edc_data_warnings.md)
  : Save EDCimport warning to Excel
- [`assert_no_duplicate()`](https://danchaltiel.github.io/EDCimport/reference/assert_no_duplicate.md)
  : Assert that a dataframe has one row per patient
- [`edc_warn_patient_diffs()`](https://danchaltiel.github.io/EDCimport/reference/edc_warn_patient_diffs.md)
  : Check the validity of the subject ID column
- [`edc_warn_extraction_date()`](https://danchaltiel.github.io/EDCimport/reference/edc_warn_extraction_date.md)
  : Warn if extraction is too old
- [`compare_databases()`](https://danchaltiel.github.io/EDCimport/reference/compare_databases.md)
  : Compare multiple EDC database extractions

## Project management

- [`edc_inform_code()`](https://danchaltiel.github.io/EDCimport/reference/edc_inform_code.md)
  : Shows how many code you wrote

- [`search_for_newer_data()`](https://danchaltiel.github.io/EDCimport/reference/search_for_newer_data.md)
  : Search for newer data

- [`save_sessioninfo()`](https://danchaltiel.github.io/EDCimport/reference/save_sessioninfo.md)
  :

  Save [`sessionInfo()`](https://rdrr.io/r/utils/sessionInfo.html)
  output

## Searching databases

- [`edc_find_value()`](https://danchaltiel.github.io/EDCimport/reference/edc_find_value.md)
  [`edc_find_column()`](https://danchaltiel.github.io/EDCimport/reference/edc_find_value.md)
  : Search the whole database
- [`lastnews_table()`](https://danchaltiel.github.io/EDCimport/reference/lastnews_table.md)
  : Get a table with the latest date for each patient
- [`edc_db_to_excel()`](https://danchaltiel.github.io/EDCimport/reference/edc_db_to_excel.md)
  [`edc_browse_excel()`](https://danchaltiel.github.io/EDCimport/reference/edc_db_to_excel.md)
  : Save the database as an Excel file
- [`get_common_cols()`](https://danchaltiel.github.io/EDCimport/reference/get_common_cols.md)
  [`summary(`*`<common_cols>`*`)`](https://danchaltiel.github.io/EDCimport/reference/get_common_cols.md)
  **\[experimental\]** : Get columns that are common to multiple
  datasets
- [`edc_viewer()`](https://danchaltiel.github.io/EDCimport/reference/edc_viewer.md)
  : Shiny data explorer

## Options

- [`edc_options()`](https://danchaltiel.github.io/EDCimport/reference/edc_options.md)
  :

  Set global options for `EDCimport`

- [`edc_peek_options()`](https://danchaltiel.github.io/EDCimport/reference/edc_peek_options.md)
  :

  See which `EDCimport` option is currently set

- [`edc_reset_options()`](https://danchaltiel.github.io/EDCimport/reference/edc_reset_options.md)
  :

  Reset all `EDCimport` options

## Graphics

- [`edc_swimmerplot()`](https://danchaltiel.github.io/EDCimport/reference/edc_swimmerplot.md)
  : Swimmer plot of all dates columns
- [`edc_crf_plot()`](https://danchaltiel.github.io/EDCimport/reference/edc_crf_plot.md)
  [`edc_pal_crf()`](https://danchaltiel.github.io/EDCimport/reference/edc_crf_plot.md)
  : Show the current CRF status distribution
- [`edc_patient_gridplot()`](https://danchaltiel.github.io/EDCimport/reference/edc_patient_gridplot.md)
  : Patient gridplot
- [`edc_population_plot()`](https://danchaltiel.github.io/EDCimport/reference/edc_population_plot.md)
  : Plot the populations

## Helpers

- [`unify()`](https://danchaltiel.github.io/EDCimport/reference/unify.md)
  : Unify a vector
- [`fct_yesno()`](https://danchaltiel.github.io/EDCimport/reference/fct_yesno.md)
  : Format factor levels as Yes/No
- [`table_format()`](https://danchaltiel.github.io/EDCimport/reference/table_format.md)
  : Identify if a dataframe has a long or a wide format
- [`save_plotly()`](https://danchaltiel.github.io/EDCimport/reference/save_plotly.md)
  : Save a plotly to an HTML file
- [`select_distinct()`](https://danchaltiel.github.io/EDCimport/reference/select_distinct.md)
  : Select only distinct columns
- [`get_datasets()`](https://danchaltiel.github.io/EDCimport/reference/get_datasets.md)
  : Retrieve the datasets as a list of data.frames
- [`edc_left_join()`](https://danchaltiel.github.io/EDCimport/reference/edc_left_join.md)
  : Join within the EDCimport framework

## Examples

- [`edc_example()`](https://danchaltiel.github.io/EDCimport/reference/edc_example.md)
  : Example database

## Manual correction

- [`manual_correction()`](https://danchaltiel.github.io/EDCimport/reference/manual_correction.md)
  [`reset_manual_correction()`](https://danchaltiel.github.io/EDCimport/reference/manual_correction.md)
  **\[experimental\]** : Manual correction

# Articles

### Articles

- [1 - Read your
  database](https://danchaltiel.github.io/EDCimport/articles/reading.md):
- [2 - Post
  processing](https://danchaltiel.github.io/EDCimport/articles/postprocessing.md):
- [3 - Data
  checking](https://danchaltiel.github.io/EDCimport/articles/checking.md):
- [4 - Database
  Visualizing](https://danchaltiel.github.io/EDCimport/articles/visualizing.md):
- [5 - Utility
  Functions](https://danchaltiel.github.io/EDCimport/articles/utils.md):
- [Table Reading Date
  Error](https://danchaltiel.github.io/EDCimport/articles/trialmaster_date_error.md):
